!function(t){var e=function(){function t(){this.callbacks=[]}return t.prototype.on=function(t,e){return this.callbacks.push({event:t,fn:e}),this},t.prototype.off=function(t,e){return this.callbacks=this.callbacks.filter(function(n){return!(n.event===t&&n.fn===e)}),this},t.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return this.on(t,n),this},t.prototype.emit=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.callbacks.filter(function(e){return e.event===t}).forEach(function(t){t.fn.apply(e,n)}),this},t}(),n=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),o=["alt","src","title","value","placeholder","label"],a=function(t){function e(e,n){void 0===e&&(e="cn");var a=t.call(this)||this;return a._defaultLang=e,a._locale=e,a._attrs=n||o,a._dictionarys={},a}return n(e,t),e.prototype.dictionary=function(t){var e=this;t&&Object.keys(t).forEach(function(n){e._dictionarys[n]=t[n]})},e.prototype.parse=function(t){var e,n={optionsLang:{},locale:null,localeText:null};if(t=String(t).replace(/<!--\{([\w-]+)\}-->([^]*?)<!--\/\{\1\}-->|<!--\{([\w-]+|\*)\}([^]*?)-->/g,function(t,o,a,i,r){return e=!0,o?(n.locale=o,n.localeText=a,n.optionsLang[o]=a):n.optionsLang[i]=r,""}),!e)return null;if(t=t.trim(),t&&(n.defaultText=t,n.optionsLang[this._defaultLang]||(n.optionsLang[this._defaultLang]=t)),void 0!==n.optionsLang["*"]){var o;o=""===n.optionsLang["*"]?this.parse(this._dictionarys[t]):this.parse(this._dictionarys[n.optionsLang["*"]]),o&&(Object.keys(o.optionsLang).forEach(function(t){n.optionsLang[t]=o.optionsLang[t]}),n.locale=n.locale||o.locale,n.localeText=n.localeText||o.localeText)}return n},e.prototype.build=function(t,e){var n="";if(Object.keys(e.optionsLang).forEach(function(o){var a=e.optionsLang[o];n+=o===t?"\x3c!--{"+o+"}--\x3e"+a+"\x3c!--/{"+o+"}--\x3e":"\x3c!--{"+o+"}"+a+"--\x3e"}),!e.optionsLang[t]){var o=this._defaultLang,a=e.optionsLang[this._defaultLang]||"";n+="\x3c!--{"+o+"}--\x3e"+a+"\x3c!--/{"+o+"}--\x3e"}return n},e.prototype.update=function(t,e){var n=this;if(t=t||this._locale,this._locale!==t&&(this._locale=t,this.emit("change",t)),"undefined"!=typeof document){e?"string"==typeof e&&(e=document.querySelector(e)):e=document.documentElement;for(var o,a=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1),i=[],r=[];o=a.nextNode();)i.indexOf(o.parentNode)>=0||/^(script|style|link)$/i.test(o.parentNode.nodeName)||!/^\{[\w-]+\}/.test(o.nodeValue)||(i.push(o.parentNode),r.push(this.parse(o.parentNode.innerHTML)));if(i.forEach(function(e,o){e.innerHTML=n.build(t,r[o])}),this._attrs.forEach(function(o){var a="data-lang-"+o;[].slice.call(e.querySelectorAll("["+a+"]")).forEach(function(e){var i=e.getAttribute(a),r=n.parse(i);r&&(r.optionsLang[n._defaultLang]||(r.optionsLang[n._defaultLang]=e.getAttribute(o)),e.setAttribute(a,n.build(t,r)),e.setAttribute(o,r.optionsLang[t]||r.optionsLang[n._defaultLang]))})}),e===document.documentElement){var c=document.querySelector("title");if(c&&c.hasAttribute("data-lang-content")){var l=c.getAttribute("data-lang-content"),s=this.parse(l);if(!s)return;s.optionsLang[this._defaultLang]||(s.optionsLang[this._defaultLang]=c.textContent),c.setAttribute("data-lang-content",this.build(t,s)),c.textContent=s.optionsLang[t]||s.optionsLang[this._defaultLang]}}}},e.prototype.get=function(t,e){e=e||this._locale;var n=this.parse(t);return n?void 0!==n.optionsLang[e]?n.optionsLang[e]:void 0!==n.defaultText?n.defaultText:n.optionsLang[this._defaultLang]:t},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&this.update(t)},enumerable:!0,configurable:!0}),e.prototype.replace=function(t,e){var n=this;for(t=String(t).replace(/(?:(?:\w+\.)+)get\((['"`])(.*?-->)\1\)/g,function(t,o,a){return o+n.get(a,e)+o}).replace(/<title(?=\s)((?:"[^"]*"|'[^']*'|[^'"<>])*?)\s+data-lang-content=('|")(.*?)\2((?:"[^"]*"|'[^']*'|[^'"<>])*)>([^]*?)<\/title>/g,function(t,o,a,i,r,c){return"<title"+o+r+">"+n.get(c+i,e)+"</title>"}).replace(/<("[^"]*"|'[^']*'|[^'"<>])+(data-lang-\w+)("[^"]*"|'[^']*'|[^'"<>])+>/g,function(t){var o={};return t=t.replace(/((?:\s*)(?:[\w-])*)data-lang((?:-\w+)+)\s*=\s*(['"])([^]*?)(\3)/g,function(t,e,n,a,i){return e.trim()?t:(o[n.slice(1)]=i,e.trim())}),Object.keys(o).forEach(function(a){t=t.replace(new RegExp("(['\"\\s]"+a+"\\s*=\\s*)(['\"])([^]*?)(\\2)","g"),function(t,i,r,c){return i+r+n.get(c+o[a],e)+r})}),t});;){var o=t.match(/((?:<!--\{(?:[\w*]+)\}.*?-->\s*)+)(<\/(\w+)>)/);if(!o)break;var a=o[3],i=o[1],r=RegExp["$`"],c=o[2]+RegExp["$'"];if(!(o=r.match(new RegExp("<("+a+")(?:\"[^\"]*\"|'[^']*'|[^\"'>])*>(?![^]*<\\1(?:\"[^\"]*\"|'[^']*'|[^\"'>])*>)"))))break;i=RegExp["$'"]+i,r=r.slice(0,o.index)+o[0],t=r+this.get(i,e)+c}return t},e}(e),i={Languages:a};"function"==typeof define?(define.amd||define.cmd)&&define(function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:window.h5i18n=i}();